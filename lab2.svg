<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 862.9748201884628 1302.9024566863488" width="862.9748201884628" height="1302.9024566863488">
  <!-- svg-source:excalidraw -->
  
  <defs>
    <style class="style-fonts">
      @font-face {
        font-family: "Virgil";
        src: url("https://excalidraw.com/Virgil.woff2");
      }
      @font-face {
        font-family: "Cascadia";
        src: url("https://excalidraw.com/Cascadia.woff2");
      }
      @font-face {
        font-family: "Assistant";
        src: url("https://excalidraw.com/Assistant-Regular.woff2");
      }
    </style>
    
  </defs>
  <rect x="0" y="0" width="862.9748201884628" height="1302.9024566863488" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(144.57802150086138 10) rotate(0 143.80952623155383 152.3809814453125)"><path d="M32 0 C86.06 -1.21, 141.36 -0.97, 255.62 0 M32 0 C84.35 -1.01, 136.5 -1.88, 255.62 0 M255.62 0 C277.41 0, 286.15 10.22, 287.62 32 M255.62 0 C277.84 -2.13, 289.61 12.7, 287.62 32 M287.62 32 C288.36 115.98, 288.3 200.24, 287.62 272.76 M287.62 32 C289.24 92.09, 289.85 152.72, 287.62 272.76 M287.62 272.76 C286.4 292.56, 275.95 303.81, 255.62 304.76 M287.62 272.76 C287.85 294.49, 276.13 306.24, 255.62 304.76 M255.62 304.76 C194.02 305.27, 130.67 305.89, 32 304.76 M255.62 304.76 C189.59 304.54, 124.24 304.45, 32 304.76 M32 304.76 C12.26 302.96, 0.66 295.68, 0 272.76 M32 304.76 C12.57 303.64, 0.36 296.24, 0 272.76 M0 272.76 C2 195.08, 0.58 120.3, 0 32 M0 272.76 C0.64 182.27, 0.66 91.94, 0 32 M0 32 C1.28 11.31, 11.28 1.18, 32 0 M0 32 C0.5 9.79, 10.43 -2.2, 32 0" stroke="#1971c2" stroke-width="2" fill="none"></path></g><g stroke-linecap="round"><g transform="translate(144.7525412312259 65.2381388346353) rotate(0 142.53968980577258 0.6349012586805713)"><path d="M-0.93 -1.08 C46.43 -1.14, 236.7 -0.17, 284.23 0.16 M0.78 0.97 C48.51 0.98, 238.84 0.94, 286.5 1.12" stroke="#1971c2" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(230.1798122315098 69.68560688921733) rotate(0 56.82542588975693 51.42859564887152)"><path d="M25.71 0 C45.58 -1.01, 67.87 -0.66, 87.94 0 M25.71 0 C47.08 -0.21, 69.06 -0.95, 87.94 0 M87.94 0 C104.85 -1.89, 114.08 9.72, 113.65 25.71 M87.94 0 C107.03 -0.28, 115.84 9.32, 113.65 25.71 M113.65 25.71 C114.29 38.02, 113.58 54.53, 113.65 77.14 M113.65 25.71 C114.38 42.81, 114.47 62.05, 113.65 77.14 M113.65 77.14 C114.53 95.42, 104.61 102.52, 87.94 102.86 M113.65 77.14 C111.6 92.39, 103.47 102.69, 87.94 102.86 M87.94 102.86 C68.43 102.56, 52.2 103.67, 25.71 102.86 M87.94 102.86 C64.13 102.41, 39.54 103.73, 25.71 102.86 M25.71 102.86 C9.12 102.3, 1.45 94.51, 0 77.14 M25.71 102.86 C9.62 101.02, 0.5 94.34, 0 77.14 M0 77.14 C-1.16 58.58, 0.47 43.81, 0 25.71 M0 77.14 C-1.09 59.17, 0.77 41.71, 0 25.71 M0 25.71 C-0.98 8.72, 8.68 1.49, 25.71 0 M0 25.71 C-1.26 9.27, 10 -1.74, 25.71 0" stroke="#1971c2" stroke-width="2" fill="none"></path></g><g transform="translate(251.84898812126676 109.11420253808885) rotate(0 35.15625 12)"><text x="35.15625" y="0" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">fork()</text></g><g stroke-linecap="round" transform="translate(172.24511379539985 217.3969532455324) rotate(0 119.3804951230455 42.85712348090277)"><path d="M21.43 0 C80.48 3.49, 139.9 1.42, 217.33 0 M21.43 0 C89.05 -1.91, 155.42 -0.85, 217.33 0 M217.33 0 C231.69 -0.51, 240.53 6.3, 238.76 21.43 M217.33 0 C229.81 1.18, 237.7 7.03, 238.76 21.43 M238.76 21.43 C237.06 36.57, 237.96 52.2, 238.76 64.29 M238.76 21.43 C238.08 35.76, 238.33 51.36, 238.76 64.29 M238.76 64.29 C237.93 76.99, 232.17 85.57, 217.33 85.71 M238.76 64.29 C239.06 80.59, 230.17 85.96, 217.33 85.71 M217.33 85.71 C167.62 86.57, 114.88 84.39, 21.43 85.71 M217.33 85.71 C173.75 85.95, 132.9 86.54, 21.43 85.71 M21.43 85.71 C8.45 83.97, 0.06 77.23, 0 64.29 M21.43 85.71 C6.73 84.41, -0.67 79.52, 0 64.29 M0 64.29 C-0.75 52.95, -1.61 40.09, 0 21.43 M0 64.29 C-0.35 47.99, 1 30.41, 0 21.43 M0 21.43 C-0.75 6.69, 7.24 -0.2, 21.43 0 M0 21.43 C2.21 9.24, 5.42 2.15, 21.43 0" stroke="#1971c2" stroke-width="2" fill="none"></path></g><g transform="translate(233.64153184537525 22.063513861762118) rotate(0 52.734375 12)"><text x="0" y="0" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">user mode</text></g><g stroke-linecap="round"><g transform="translate(177.1069757724864 262.52640924269656) rotate(0 115.07816559669499 -1.3809814013383175)"><path d="M-0.05 -1.16 C38.42 -1.51, 192.17 -2.63, 230.37 -2.96 M-1.54 0.84 C36.84 0.76, 190.7 -1.05, 229.53 -1.52" stroke="#1971c2" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(259.04265711234035 230.76478347049513) rotate(0 35.15625 12)"><text x="0" y="0" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">usys.S</text></g><g transform="translate(183.8965746241464 272.07782339699475) rotate(0 112.734375 12)"><text x="0" y="0" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">fork通过ecall进入中断</text></g><g stroke-linecap="round"><g transform="translate(286.3300712021489 174.43883934784546) rotate(0 1.036032391197864 22.10191983367679)"><path d="M-0.34 -0.46 C0.08 6.96, 1.86 37.15, 2.32 44.66 M0.48 0.5 C0.88 7.75, 1.72 36.72, 2.01 43.93" stroke="#1971c2" stroke-width="2" fill="none"></path></g><g transform="translate(286.3300712021489 174.43883934784546) rotate(0 1.036032391197864 22.10191983367679)"><path d="M-6.26 23.42 C-4.95 29.12, -1.17 34.52, 2.01 43.93 M-6.26 23.42 C-2.97 31.48, -0.52 39.13, 2.01 43.93" stroke="#1971c2" stroke-width="2" fill="none"></path></g><g transform="translate(286.3300712021489 174.43883934784546) rotate(0 1.036032391197864 22.10191983367679)"><path d="M8.86 22.89 C6.32 28.69, 6.24 34.22, 2.01 43.93 M8.86 22.89 C6.48 31.21, 3.25 39.06, 2.01 43.93" stroke="#1971c2" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(168.49313285786832 473.5655113602836) rotate(0 120.69171365379736 56.47451285991929)"><path d="M28.24 0 C91.14 -1.31, 154.99 -0.66, 213.15 0 M28.24 0 C66.63 -1.6, 104.77 -1.19, 213.15 0 M213.15 0 C233.84 -1.32, 242.81 9.86, 241.38 28.24 M213.15 0 C232.22 0.33, 239.71 7.65, 241.38 28.24 M241.38 28.24 C239.59 49.7, 239.49 70.29, 241.38 84.71 M241.38 28.24 C240.89 45.5, 241.68 62.04, 241.38 84.71 M241.38 84.71 C239.49 104.17, 233.8 113.71, 213.15 112.95 M241.38 84.71 C242.37 105.16, 234.09 112.68, 213.15 112.95 M213.15 112.95 C138.14 113.23, 65.69 113.63, 28.24 112.95 M213.15 112.95 C143.62 111.97, 73.88 111.27, 28.24 112.95 M28.24 112.95 C9.26 112.9, 0.19 104.03, 0 84.71 M28.24 112.95 C9.46 112.54, 1 102.37, 0 84.71 M0 84.71 C0.49 66.08, 1.21 51.39, 0 28.24 M0 84.71 C0.25 63.12, -0.51 40.76, 0 28.24 M0 28.24 C0.72 10.26, 8.27 0.4, 28.24 0 M0 28.24 C-1.95 7.99, 9.25 1.7, 28.24 0" stroke="#e03131" stroke-width="2" fill="none"></path></g><g stroke-linecap="round"><g transform="translate(165.76052534661096 515.4658175081004) rotate(0 118.86993477439205 0)"><path d="M-0.55 -0.25 C39.13 -0.57, 198.16 -1.2, 237.98 -1.01 M1.36 -1.42 C40.92 -1.71, 197.72 -0.07, 237.15 -0.01" stroke="#e03131" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(221.09649633593017 489.9610591352672) rotate(0 70.3125 12)"><text x="0" y="0" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">trampoline.S</text></g><g transform="translate(176.6909553916406 526.396442138252) rotate(0 111.015625 24)"><text x="0" y="0" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">uservec跳转到内核指定</text><text x="0" y="24" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">的中断判断函数</text></g><g stroke-linecap="round" transform="translate(170.59725796929501 619.7538614226022) rotate(0 120.69171365379736 56.47451285991929)"><path d="M28.24 0 C86.07 -0.17, 142.42 0.58, 213.15 0 M28.24 0 C72.82 1.57, 118.59 2.37, 213.15 0 M213.15 0 C232.05 -1.4, 242.88 8.65, 241.38 28.24 M213.15 0 C232.64 1.25, 243.38 11.52, 241.38 28.24 M241.38 28.24 C242.03 41.82, 240.58 57.63, 241.38 84.71 M241.38 28.24 C241.29 45.68, 241.65 63.76, 241.38 84.71 M241.38 84.71 C241.57 102.57, 230.67 113.9, 213.15 112.95 M241.38 84.71 C240.23 102.4, 230.6 113.85, 213.15 112.95 M213.15 112.95 C164.33 114.58, 113.45 114.98, 28.24 112.95 M213.15 112.95 C142.42 114.75, 72.7 114.5, 28.24 112.95 M28.24 112.95 C10.22 112.71, -1.77 104.72, 0 84.71 M28.24 112.95 C7.87 113.27, 1.9 101.31, 0 84.71 M0 84.71 C0.98 67.87, -1.97 51.68, 0 28.24 M0 84.71 C-0.18 65.78, -0.97 48.34, 0 28.24 M0 28.24 C1.37 9.14, 8.63 0.38, 28.24 0 M0 28.24 C-0.12 11.03, 10.91 0.84, 28.24 0" stroke="#e03131" stroke-width="2" fill="none"></path></g><g stroke-linecap="round" transform="translate(172.13659332411817 778.9382316378865) rotate(0 120.69171365379736 56.47451285991923)"><path d="M28.24 0 C83.81 -0.46, 137.58 -1.94, 213.15 0 M28.24 0 C91.92 1.31, 156.47 0.98, 213.15 0 M213.15 0 C233.8 0.66, 241.32 8.67, 241.38 28.24 M213.15 0 C232.36 1.81, 240.45 11.16, 241.38 28.24 M241.38 28.24 C241.89 42.15, 241.37 52.68, 241.38 84.71 M241.38 28.24 C241.83 47.54, 240.89 68.94, 241.38 84.71 M241.38 84.71 C240.4 104.6, 231.4 111.07, 213.15 112.95 M241.38 84.71 C240.81 104.17, 232.8 113.18, 213.15 112.95 M213.15 112.95 C158.45 112.9, 100.92 110.74, 28.24 112.95 M213.15 112.95 C154.8 114.62, 95.05 114.03, 28.24 112.95 M28.24 112.95 C8.19 114.78, 1.06 105.33, 0 84.71 M28.24 112.95 C11.11 112.3, -0.76 103.54, 0 84.71 M0 84.71 C-2.14 71.25, -0.07 57.25, 0 28.24 M0 84.71 C0.96 65.26, 0.19 44.18, 0 28.24 M0 28.24 C-0.19 8.05, 8.63 -0.5, 28.24 0 M0 28.24 C2.12 8.82, 10.94 0.87, 28.24 0" stroke="#e03131" stroke-width="2" fill="none"></path></g><g stroke-linecap="round" transform="translate(115.66210478733922 953.8272041484212) rotate(0 189.00775274514098 56.47451285991929)"><path d="M28.24 0 C123.43 -2.9, 221.64 -1.46, 349.78 0 M28.24 0 C132.8 1.37, 237.37 0.83, 349.78 0 M349.78 0 C367.08 -0.19, 376.65 8.63, 378.02 28.24 M349.78 0 C368.03 2.12, 377.42 10.94, 378.02 28.24 M378.02 28.24 C376.9 47.03, 380.16 66.48, 378.02 84.71 M378.02 28.24 C377.19 40.12, 376.52 51.44, 378.02 84.71 M378.02 84.71 C378.73 103.52, 370.27 112.94, 349.78 112.95 M378.02 84.71 C376.26 104, 368 114.9, 349.78 112.95 M349.78 112.95 C265.89 112.36, 179.11 111.62, 28.24 112.95 M349.78 112.95 C268.41 113.52, 188.51 114.32, 28.24 112.95 M28.24 112.95 C8.84 114.9, -1.89 102.25, 0 84.71 M28.24 112.95 C7.63 111.45, -2.06 105.48, 0 84.71 M0 84.71 C-0.45 68.08, -0.3 50.22, 0 28.24 M0 84.71 C0.37 73.71, -0.53 60.96, 0 28.24 M0 28.24 C-0.22 7.99, 8.11 1.48, 28.24 0 M0 28.24 C-2.07 11.14, 10.55 -1.98, 28.24 0" stroke="#e03131" stroke-width="2" fill="none"></path></g><g stroke-linecap="round"><g transform="translate(172.13669061667906 663.4839954447156) rotate(0 117.0481802181269 0.4554508006364131)"><path d="M-0.58 1.05 C38.68 0.99, 195.49 0.05, 234.54 0.21 M1.32 0.55 C40.54 0.59, 195.26 1.43, 233.82 1.39" stroke="#e03131" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(176.69110133048207 819.2446180838874) rotate(0 114.7709748612254 0.9108529549923219)"><path d="M0.54 0.32 C38.93 0.68, 191.64 0.81, 229.68 1.13 M-0.64 -0.55 C37.67 0.03, 190.16 2.19, 228.8 2.3" stroke="#e03131" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(123.86002461367207 988.6682296330658) rotate(0 180.80985724194795 0.4554264774960757)"><path d="M-1.09 1.18 C59.17 1.3, 300.41 -0.05, 360.78 -0.06 M0.54 0.76 C61.25 1.05, 303.12 0.67, 363.05 0.97" stroke="#e03131" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(250.24461788245208 634.7911544368485) rotate(0 35.15625 12)"><text x="0" y="0" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">trap.c</text></g><g transform="translate(184.66121062550633 679.1965980885768) rotate(0 110 24)"><text x="0" y="0" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">usertrap 判断如果是</text><text x="0" y="24" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">系统调用则执行响应函数</text></g><g transform="translate(234.07663740737507 791.6904405623217) rotate(0 52.734375 12)"><text x="0" y="0" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">syscall.c</text></g><g transform="translate(184.43364332559952 834.0463677727561) rotate(0 106.875 24)"><text x="0" y="0" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">syscall 根据系统调用</text><text x="0" y="24" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">进入相应处理函数</text></g><g transform="translate(230.20531776353596 955.8765989740137) rotate(0 52.734375 12)"><text x="0" y="0" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">sysproc.c</text></g><g transform="translate(129.09762368999986 991.4009344368841) rotate(0 180 36)"><text x="0" y="0" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">sys_fork</text><text x="0" y="24" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">如果这个系统调用有参数，需要从中断帧</text><text x="0" y="48" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">保存的寄存器中取出</text></g><g stroke-linecap="round" transform="translate(154.14678532335523 1143.0625971628892) rotate(0 150.2954805860775 56.47451285991929)"><path d="M28.24 0 C90.8 1.45, 153.92 1.93, 272.35 0 M28.24 0 C110.57 2.5, 193.07 1.2, 272.35 0 M272.35 0 C292.6 -0.28, 301.95 10.41, 300.59 28.24 M272.35 0 C289.14 1.84, 301.79 7.18, 300.59 28.24 M300.59 28.24 C301.38 43.62, 302.05 59.78, 300.59 84.71 M300.59 28.24 C301.14 44.26, 300.1 62.23, 300.59 84.71 M300.59 84.71 C300.48 102.86, 290 114.05, 272.35 112.95 M300.59 84.71 C302.16 103.95, 292.87 114.64, 272.35 112.95 M272.35 112.95 C193.79 115.12, 117.79 114.63, 28.24 112.95 M272.35 112.95 C212.11 113.46, 152.34 114.4, 28.24 112.95 M28.24 112.95 C9.69 114.92, -1.01 101.61, 0 84.71 M28.24 112.95 C9 111.14, 0.7 103.24, 0 84.71 M0 84.71 C-0.82 62.46, -1.1 41.4, 0 28.24 M0 84.71 C-0.01 67.23, -0.9 49.93, 0 28.24 M0 28.24 C1.04 9.16, 10.27 -1.79, 28.24 0 M0 28.24 C-1.02 11.49, 7.18 0.06, 28.24 0" stroke="#e03131" stroke-width="2" fill="none"></path></g><g stroke-linecap="round"><g transform="translate(158.76012784773656 1187.131864455707) rotate(0 146.19637473406968 -0.000097292561008544)"><path d="M-0.53 -1.15 C47.95 -1.1, 243.19 0.8, 291.88 0.81 M1.39 0.85 C49.58 0.54, 241.87 -0.69, 290.66 -0.89" stroke="#e03131" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(252.29418297002644 1155.5871414948567) rotate(0 35.15625 12)"><text x="0" y="0" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">proc.c</text></g><g transform="translate(160.06754843906765 1197.9430687052918) rotate(0 140 24)"><text x="0" y="0" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">fork</text><text x="0" y="24" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">真正进行进程创建以及内存复制</text></g><g stroke-linecap="round" transform="translate(10 383.38795545409425) rotate(0 296.03630722694993 454.75725061612735)"><path d="M32 0 C146.89 -1.4, 262.66 -1.48, 560.07 0 M32 0 C214.04 -1.37, 395.67 -1.16, 560.07 0 M560.07 0 C581.52 -0.98, 593.96 10.52, 592.07 32 M560.07 0 C581.89 -0.86, 590.86 11.59, 592.07 32 M592.07 32 C592.72 240.67, 592.7 448.9, 592.07 877.51 M592.07 32 C589.03 220.93, 588.95 409.3, 592.07 877.51 M592.07 877.51 C592.38 898.98, 581.36 910.79, 560.07 909.51 M592.07 877.51 C594.13 896.74, 579.62 911.49, 560.07 909.51 M560.07 909.51 C419.31 907.6, 277.75 906.84, 32 909.51 M560.07 909.51 C415.17 911.38, 270.43 911.32, 32 909.51 M32 909.51 C9.7 911.1, -1.08 897.39, 0 877.51 M32 909.51 C10.16 908.97, -1.71 898.04, 0 877.51 M0 877.51 C1.35 597.93, 0.13 319.45, 0 32 M0 877.51 C1.79 619.53, 1.39 360.86, 0 32 M0 32 C-1.41 10.03, 8.8 1.33, 32 0 M0 32 C0.73 10.92, 10.76 -1.02, 32 0" stroke="#e03131" stroke-width="2" fill="none"></path></g><g stroke-linecap="round"><g transform="translate(15.465409607636616 450.5655013211182) rotate(0 288.29376523183254 -0.9109016012728262)"><path d="M-0.47 -0.21 C95.4 -0.6, 479.24 -1.02, 575.57 -1.19 M1.49 -1.36 C97.68 -1.59, 481.79 -2.66, 577.75 -2.99" stroke="#e03131" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(100.63259321344162 411.8531318694942) rotate(0 64.453125 12)"><text x="0" y="0" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Kernel mode</text></g><g stroke-linecap="round"><g transform="translate(288.7296632655716 305.7354060195371) rotate(0 0 82.43477067966924)"><path d="M0.02 0.01 C0.12 27.64, 1.09 137.38, 1.14 164.98 M-1.43 -1.03 C-1.44 26.88, 0.6 139.13, 0.79 166.58" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(288.7296632655716 305.7354060195371) rotate(0 0 82.43477067966924)"><path d="M-9.84 138.53 C-6.35 150.1, -2.51 158.42, 0.79 166.58 M-9.84 138.53 C-6.66 148.86, -3.08 158.55, 0.79 166.58" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(288.7296632655716 305.7354060195371) rotate(0 0 82.43477067966924)"><path d="M10.68 138.26 C7.09 149.93, 3.85 158.33, 0.79 166.58 M10.68 138.26 C6.43 148.78, 2.59 158.57, 0.79 166.58" stroke="#e03131" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(291.5329356083662 588.2184063339423) rotate(0 0 18.963230462205445)"><path d="M0.16 0.17 C0.2 6.42, 0.41 31.15, 0.36 37.52 M-0.42 -0.22 C-0.43 6.08, 0.14 31.71, 0.12 38.02" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(291.5329356083662 588.2184063339423) rotate(0 0 18.963230462205445)"><path d="M-6.57 20.27 C-4.12 26.59, -2.96 31.43, 0.12 38.02 M-6.57 20.27 C-4.43 27.51, -0.94 33.94, 0.12 38.02" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(291.5329356083662 588.2184063339423) rotate(0 0 18.963230462205445)"><path d="M6.41 20.13 C4.67 26.51, 1.67 31.4, 0.12 38.02 M6.41 20.13 C3.44 27.38, 1.83 33.86, 0.12 38.02" stroke="#e03131" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(291.5329356083662 736.673336117968) rotate(0 1.083522228832635 18.9632304622055)"><path d="M-0.14 -0.06 C0.13 6.38, 1.64 31.91, 1.98 38.21 M0.79 -0.56 C0.94 5.74, 1.35 30.92, 1.45 37.4" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(291.5329356083662 736.673336117968) rotate(0 1.083522228832635 18.9632304622055)"><path d="M-5.33 19.65 C-3.02 25.8, 0.05 32.11, 1.45 37.4 M-5.33 19.65 C-3.41 24.78, -1.84 29.74, 1.45 37.4" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(291.5329356083662 736.673336117968) rotate(0 1.083522228832635 18.9632304622055)"><path d="M7.66 19.45 C5.24 25.65, 3.57 32.04, 1.45 37.4 M7.66 19.45 C6.04 24.67, 4.08 29.68, 1.45 37.4" stroke="#e03131" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(291.5329356083662 891.6301516004168) rotate(0 0.5417321788229401 32.50832893956749)"><path d="M-0.87 -0.43 C-0.63 10.07, 0.64 52.96, 0.85 64.02 M0.88 -1.71 C0.99 8.83, 0.05 54.07, -0.21 65.04" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(291.5329356083662 891.6301516004168) rotate(0 0.5417321788229401 32.50832893956749)"><path d="M-9.86 36.63 C-7.92 43.49, -6.41 49.91, -0.21 65.04 M-9.86 36.63 C-6.07 48.21, -3.05 58.89, -0.21 65.04" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(291.5329356083662 891.6301516004168) rotate(0 0.5417321788229401 32.50832893956749)"><path d="M10.66 37.08 C7.41 43.68, 3.73 49.98, -0.21 65.04 M10.66 37.08 C6.72 48.68, 2.01 59.19, -0.21 65.04" stroke="#e03131" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(298.03441620848207 1072.59358393757) rotate(0 0.5419057923830906 39.00998315324364)"><path d="M0.04 0.81 C0 13.75, 0.53 65.91, 0.86 78.78 M-1.4 0.18 C-1.71 13.31, -0.73 63.86, -0.2 77.05" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(298.03441620848207 1072.59358393757) rotate(0 0.5419057923830906 39.00998315324364)"><path d="M-11.24 49.15 C-5.33 59.67, -1.11 72.56, -0.2 77.05 M-11.24 49.15 C-7.54 57.14, -5.61 64.99, -0.2 77.05" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(298.03441620848207 1072.59358393757) rotate(0 0.5419057923830906 39.00998315324364)"><path d="M9.28 48.59 C7.18 59.33, 3.4 72.44, -0.2 77.05 M9.28 48.59 C6.84 56.89, 2.64 64.91, -0.2 77.05" stroke="#e03131" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(460.54582001531355 72.9277351153647) rotate(0 171.015625 48)"><text x="0" y="0" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">此处为用户态的fork,声明在user.h</text><text x="0" y="24" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">定义在usys.S, 所有的系统调用在</text><text x="0" y="48" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">用户态都会调用ecall, 从而进入内核</text><text x="0" y="72" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">来完成真正的实现。</text></g><g stroke-linecap="round"><g transform="translate(451.2837343705529 124.75184515078885) rotate(0 -50.280378058924214 1.3231576158523524)"><path d="M-0.54 -0.36 C-17.2 0.36, -83.51 2.69, -100.35 3.22 M1.37 -1.59 C-15.38 -1.13, -84.42 0.42, -101.19 1.4" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(451.2837343705529 124.75184515078885) rotate(0 -50.280378058924214 1.3231576158523524)"><path d="M-73.41 -9.91 C-81.44 -6.71, -87.22 -5.86, -101.19 1.4 M-73.41 -9.91 C-81.94 -6.59, -91.57 -2.01, -101.19 1.4" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(451.2837343705529 124.75184515078885) rotate(0 -50.280378058924214 1.3231576158523524)"><path d="M-72.64 10.6 C-80.68 8.38, -86.67 3.82, -101.19 1.4 M-72.64 10.6 C-81.41 7.43, -91.29 5.53, -101.19 1.4" stroke="#e03131" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(494.3810701884628 243.00469282557518) rotate(0 179.296875 12)"><text x="0" y="0" font-family="Cascadia, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">ecall把系统调用对应的数字装入寄存器</text></g><g stroke-linecap="round"><g transform="translate(487.0232293193085 254.72277234509866) rotate(0 -37.606745454284464 7.630344869506615)"><path d="M-0.5 0.7 C-12.78 3.08, -62.31 12.24, -74.75 14.56 M1.43 0.02 C-10.87 2.53, -62.58 13.14, -75.45 15.72" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(487.0232293193085 254.72277234509866) rotate(0 -37.606745454284464 7.630344869506615)"><path d="M-49.87 0.05 C-54.07 4.02, -61.79 6.73, -75.45 15.72 M-49.87 0.05 C-55.98 4.73, -61.46 7.22, -75.45 15.72" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(487.0232293193085 254.72277234509866) rotate(0 -37.606745454284464 7.630344869506615)"><path d="M-45.78 20.16 C-50.88 19.88, -59.46 18.35, -75.45 15.72 M-45.78 20.16 C-52.97 19.98, -59.43 17.61, -75.45 15.72" stroke="#e03131" stroke-width="2" fill="none"></path></g></g><mask></mask></svg>